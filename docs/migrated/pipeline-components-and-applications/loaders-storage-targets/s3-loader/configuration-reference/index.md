---
title: "S3 loader configuration reference"
date: "2021-10-04"
sidebar_position: 50
---

This is a complete list of the options that can be configured in the S3 loader HOCON config file. The [example configs in github](https://github.com/snowplow/snowplow-s3-loader/tree/master/config) show how to prepare an input file.

<table class="has-fixed-layout"><tbody><tr><td><code>purpose</code></td><td>Required. Use <code>RAW</code> to sink data exactly as-is. Use <code>ENRICHED_EVENTS</code> to also enable event latency metrics. Use <code>SELF_DESCRIBING</code> to enable partitioning self-describing data by its schema.</td></tr><tr><td><code>input.appName</code></td><td>Required. Kinesis Client Lib app name (corresponds to DynamoDB table name)</td></tr><tr><td><code>input.streamName</code></td><td>Required. Name of the kinesis stream from which to read inputs.</td></tr><tr><td><code>input.position</code></td><td>Required. Use “TRIM_HORIZON” to start streaming at the last untrimmed record in the shard, which is the oldest data record in the shard. Or use “LATEST” to start streaming just after the most recent record in the shard.</td></tr><tr><td><code>input.customEndpoint</code></td><td>Optional. Override the default endpoint for kinesis client api calls.</td></tr><tr><td><code>input.maxRecords</code></td><td>Required. How many records the client should pull from kinesis each time.</td></tr><tr><td><code>output.s3.path</code></td><td>Required. Full path to output data, e.g. <code>s3://acme-snowplow-output/raw/</code></td></tr><tr><td><code>output.s3.partitionFormat</code></td><td>Optional. <em>Added in version 2.1.0</em>. Configures how files are partitioned into S3 directories.<br/><br/>When loading raw files, you might choose to partition by <code>date={yy}-{mm}-{dd}</code>. When loading self describing jsons, you might choose to partition by <code>{vendor}.{name}/model={model}/date={yy}-{mm}-{dd}</code>. Valid substitutions are <code>{vendor}</code>, <code>{name}</code>, <code>{format}</code>, <code>{model}</code> for self-describing jsons; and <code>{yy}</code>, <code>{mm}</code>, <code>{dd}</code>, <code>{hh}</code> for year, month, day and hour.<br/><br/>Defaults to <code>{vendor}.{schema}</code> when loading self-describing JSONs, or blank (no partitioning) when loading raw or enriched events.</td></tr><tr><td><code>output.s3.filenamePrefix</code></td><td>Optional. Adds a prefix to output files.</td></tr><tr><td><code>output.s3.compression</code></td><td>Required. Either <code>LZO</code> or <code>GZIP</code></td></tr><tr><td><code>output.s3.maxTimeout</code></td><td>Required. Maximum Timeout that the application is allowed to fail for, e.g. in case of S3 outage</td></tr><tr><td><code>output.s3.customEndpoint</code></td><td>Optional. Override the default endpoint for s3 client api calls.</td></tr><tr><td><code>region</code></td><td>Optional. When used with the <code>output.s3.customEndpoint</code> option, this sets the region of the bucket. Also sets the region of the dynamoDB table. Defaults to the current region.</td></tr><tr><td><code>output.bad.streamNme</code></td><td>Required. Name of a kinesis stream to output failures.</td></tr><tr><td><code>buffer.byteLimit</code></td><td>Required. Maximum bytes to read from kinesis before flushing a file to S3.</td></tr><tr><td><code>buffer.recordLimit</code></td><td>Required. Maximum records to read from kinesis before flushing a file to S3.</td></tr><tr><td><code>buffer.timeLimit</code></td><td>Required. Maximum time to wait in milliseconds between writing files to S3.</td></tr><tr><td><code>monitoring.snowplow.collector</code></td><td>Optional. E.g. <code>https://snplow.acme.ru</code>. URI of a snowplow collector. Used for monitoring application lifecycle and failure events.</td></tr><tr><td><code>monitoring.snowplow.appId</code></td><td>Required only if the collector uri is also configured. Sets the appId field of the snowplow events.</td></tr><tr><td><code>monitoring.sentry.dsn</code></td><td>Optional, for tracking uncaught run time exceptions</td></tr><tr><td><code>monitoring.metrics.cloudwatch</code></td><td>Optional boolean, with default true. This is used to disable sending metrics to cloudwatch.</td></tr><tr><td><code>monitoring.metrics.hostname</code></td><td>Optional, for sending loading metrics (latency and event counts) to a&nbsp;<a href="https://github.com/statsd/statsd">statsd server</a>.</td></tr><tr><td><code>monitoring.metrics.port</code></td><td>Optional, port of the statsd server.</td></tr><tr><td><code>monitoring.metrics.tags</code></td><td>E.g.&nbsp;<code>{ "key1": "value1", "key2": "value2" }</code>. Tags are used to annotate the statsd metric with any contextual information.</td></tr><tr><td><code>monitoring.metrics.prefix</code></td><td>Optional, default “snoplow.s3loader”. Configures the prefix of statsd metric names.</td></tr></tbody></table>
